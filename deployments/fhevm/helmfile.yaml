repositories:
  - name: bitnami
    url: https://charts.bitnami.com/bitnami

releases:
  # S3 - MINIO
  # temporiraly we set our own minio - this should run first + copy keys then run other releases
  - name: minio
    namespace: fhevm
    chart: bitnami/minio
    version: 15.0.3
    values:
      - minio-values.yaml

  # FHEVM postgresql    
  - name: fhevm-postgresql
    namespace: httpz
    chart: bitnami/postgresql
    version: 13.0.0
    values:
      - postgresql-values.yaml

  # FHEVM layer1-node
  - name: layer1
    namespace: httpz
    chart: "../../charts/anvil-node"
    values:
      - layer1-node-values.yaml

  - name: layer1-sc
    namespace: httpz
    chart: "../../charts/fhevm-sc-deploy"
    values:
      - layer1-sc-deploy-values.yaml
    needs:
      - layer1

  - name: layer2
    namespace: httpz
    chart: "../../charts/anvil-node"
    values:
      - layer2-node-values.yaml

  - name: layer2-sc
    namespace: httpz
    chart: "../../charts/fhevm-sc-deploy"
    values:
      - layer2-sc-deploy-values.yaml
    needs:
      - layer2

  # FHEVM coprocessor
  - name: fhevm-coprocessor
    namespace: httpz
    chart: "../../charts/fhevm-coprocessor"
    values:
      - coprocessor-values.yaml
    needs:
      - fhevm/minio
      - fhevm-postgresql
      - layer1
      - layer2
      - layer1-sc
      - layer2-sc

  ## FHEVM relayer
  - name: fhevm-relayer
    namespace: httpz
    chart: "../../charts/fhevm-relayer"
    values:
      - relayer-values.yaml
    needs:
      - fhevm/minio
      - layer1
      - layer2
      - layer1-sc
      - layer2-sc
